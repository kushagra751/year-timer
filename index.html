<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Year Timer - Vector Line UI</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <style>
    #console-messages {
      font-family: 'Courier New', monospace;
      color: #00ffc3;
      text-align: left;
      max-width: 600px;
      padding: 1rem;
      white-space: pre-wrap;
      line-height: 1.4;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <!-- Boot Sound -->
  <audio id="boot-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-changing-tab-206.wav"></audio>

  <!-- Loading Screen -->
  <div id="loading-screen">
    <div id="console-messages"></div>
    <div id="loading-text">Loading <span id="loading-percent">0%</span></div>
    <div id="loading-bar">
      <div id="loading-progress"></div>
    </div>
  </div>

  <!-- HUD Content -->
  <div class="hud" id="main-content" style="display: none;">
    <h1>Year Timer</h1>
    <div class="orbital-ring">
      <div class="planet" id="percent-text">0%</div>
      <svg width="300" height="300">
        <circle id="orbit-progress" r="140" cx="150" cy="150" />
      </svg>
    </div>
    <div class="stats">
      <div class="card">
        <h2 id="passed-time">00:00:00</h2>
        <p>Time Passed</p>
      </div>
      <div class="card">
        <h2 id="left-time">00:00:00</h2>
        <p>Time Left</p>
      </div>
      <div class="card">
        <h2 id="days-left">0</h2>
        <p>Days Left</p>
      </div>
    </div>
  </div>

  <script>
    const loadingText = document.getElementById("loading-percent");
    const loadingProgress = document.getElementById("loading-progress");
    const loadingScreen = document.getElementById("loading-screen");
    const mainContent = document.getElementById("main-content");
    const bootSound = document.getElementById("boot-sound");

    const consoleDiv = document.getElementById("console-messages");
    const messages = [
      "Initializing HUD...",
      "Calibrating sensors...",
      "Loading Time Matrix...",
      "Connecting to mainframe...",
      "Preparing orbital data...",
      "System boot complete."
    ];
    let messageIndex = 0;
    let charIndex = 0;

    function typeMessage() {
      if (messageIndex < messages.length) {
        const current = messages[messageIndex];
        consoleDiv.textContent += current[charIndex] || '';
        charIndex++;
        if (charIndex < current.length) {
          setTimeout(typeMessage, -10);
        } else {
          consoleDiv.textContent += '\n';
          charIndex = 0;
          messageIndex++;
          setTimeout(typeMessage, -20);
        }
      }
    }
    typeMessage();

    let percent = 0;
    const loadingInterval = setInterval(() => {
      percent++;
      loadingText.textContent = percent + "%";
      loadingProgress.style.width = percent + "%";
      if (percent === 10) {
        bootSound.play();
      }
      if (percent >= 100) {
        clearInterval(loadingInterval);
        loadingScreen.style.display = "none";
        mainContent.style.display = "block";
      }
    }, 10);

    function format(n) {
      return String(n).padStart(2, "0");
    }

    function updateTimers() {
      const now = new Date();
      const start = new Date(now.getFullYear(), 0, 1);
      const end = new Date(now.getFullYear(), 11, 31, 23, 59, 59);

      const totalMs = end - start;
      const elapsedMs = now - start;
      const remainingMs = end - now;

      const h1 = Math.floor(elapsedMs / (1000 * 60 * 60));
      const m1 = Math.floor((elapsedMs / (1000 * 60)) % 60);
      const s1 = Math.floor((elapsedMs / 1000) % 60);

      document.getElementById("passed-time").textContent = `${format(h1)}:${format(m1)}:${format(s1)}`;

      const h2 = Math.floor(remainingMs / (1000 * 60 * 60));
      const m2 = Math.floor((remainingMs / (1000 * 60)) % 60);
      const s2 = Math.floor((remainingMs / 1000) % 60);

      document.getElementById("left-time").textContent = `${format(h2)}:${format(m2)}:${format(s2)}`;

      const percent = (elapsedMs / totalMs) * 100;
      document.getElementById("orbit-progress").style.strokeDashoffset = 879.64 * (1 - percent / 100);
      document.getElementById("percent-text").textContent = `${percent.toFixed(2)}%`;

      const oneDay = 24 * 60 * 60 * 1000;
      const daysLeft = Math.floor(remainingMs / oneDay);
      document.getElementById("days-left").textContent = daysLeft;
    }

    function drawWireBackground() {
      const canvas = document.getElementById("bgCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      function drawLines() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = "rgba(255,255,255,0.1)";
        ctx.lineWidth = 1;

        const step = 50;
        for (let x = 0; x < canvas.width; x += step) {
          ctx.beginPath();
          ctx.moveTo(x, 0);
          ctx.lineTo(x, canvas.height);
          ctx.stroke();
        }
        for (let y = 0; y < canvas.height; y += step) {
          ctx.beginPath();
          ctx.moveTo(0, y);
          ctx.lineTo(canvas.width, y);
          ctx.stroke();
        }
      }

      drawLines();
      window.addEventListener("resize", drawWireBackground);
    }

    drawWireBackground();
    updateTimers();
    setInterval(updateTimers, 1000);
  </script>
</body>
</html>
